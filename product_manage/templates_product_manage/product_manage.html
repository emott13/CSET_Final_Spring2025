<link rel="stylesheet" href="/static/styles/styles.css">
<script src="/static_product_manage/scripts/product_manage.js" defer></script>
{% extends 'base.html' %}
{% block body %}
    <div class="full-height full-width">
        {% if error %} 
            <h3 class="error center padding-top">Error: {{error}}</h3>
        {% endif %}
        <form action="{{url_for('product_manage.product', method='create')}}" method="POST" class="manage-create-container">
            <h1>Create A Product</h1>
            {% if type == 'admin' %}
                <div class="input-row">
                    <div class="fancy-input">
                        <input class="full-width" type="text" name="vendor_id" placeholder="" required />
                        <label for="vendor_id">Vendor Email:</label>
                    </div>
                </div>
            {% endif %}
            <div class="input-row full-width">
                <div class="fancy-input full-width">
                    <input class="full-width" type="text" name="title" maxlength="255" placeholder="" required />
                    <label for="title">Title:</label>
                </div>
            </div>
            <div class="input-row full-width">
                <div class="fancy-input full-width">
                    <input class="full-width" type="text" name="description" maxlength="500" placeholder="" required />
                    <label for="description">Description:</label>
                </div>
            </div>
            <div class="input-row">
                <div class="fancy-input">
                    <input class="full-width" type="number" name="warranty_months" placeholder="" value="" min="0" default="0" required/>
                    <label for="warranty_months">Warranty Months:</label>
                </div>
            </div>
            <div class="input-row">
                <div class="fancy-input">
                    <select class="full-width" name="category" for="category">
                        {% for c in categoryData %}
                            <option name="{{c['cat_num']}}" value="{{c['cat_num']}}">
                                {{c['cat_name']}}
                            </option>
                        {% endfor %}
                    </select>
                    <input class="full-width" style="display: none">
                    <label class="label-shown" for="category">Category:</label>
                </div>
            </div>
            
            <p>Hint: Once you create the product, you can add variants</p>
            <input class="btn" type="submit" value="Submit">
        </form> 

        {% for p in productData %}
        <div class="product-data product-reviews-background">
            <form action="{{url_for('product_manage.product', method='edit', productId = p['product_id'] )}}" 
            method="POST" data-product-id="{{p['product_id']}}">
                <p class="product-id">Product Id: {{p['product_id']}}</p>
                <div class="input-row full-width">
                    <div class="fancy-input full-width">
                        <input class="full-width" type="text" name="title" 
                        value="{{p['product_title']}}" maxlength="255" placeholder="" required />
                        <label for="title">Title:</label>
                    </div>
                </div>
                <div class="input-row full-width">
                    <div class="fancy-input full-width">
                        <input class="full-width" type="text" name="description"
                        value="{{p['product_description']}}" maxlength="500" placeholder="" required />
                        <label for="description">Description:</label>
                    </div>
                </div>
                <div class="input-row">
                    <div class="fancy-input">
                        <input class="full-width" type="number" name="warranty_months" placeholder="" value="{{p['warranty_months']}}" min="0" default="0" required/>
                        <label for="warranty_months">Warranty Months:</label>
                    </div>
                </div>
                <div class="input-row">
                    <div class="fancy-input">
                        <select class="full-width" name="category" for="category">
                            {% for c in categoryData %}
                            {% set select = 'selected' if c['cat_num'] == p['cat_num'] else "" %}
                                <option name="{{c['cat_num']}}" value="{{c['cat_num']}}" {{select}}>
                                    {{c['cat_name']}}
                                </option>
                            {% endfor %}
                        </select>
                        <input class="full-width" style="display: none">
                        <label class="label-shown" for="category">Category:</label>
                    </div>
                </div>
                <input class="btn" type="submit" value="Update Product">
            </form>

            <form class="product-delete" action="{{url_for('product_manage.productDelete',  productId=p['product_id'])}}" method="POST" autocomplete="off">
                <input class="btn" type="submit" value="Delete Product" required>
                <input type="text" name="delete" class="p-delete" maxlength="29">
                <label for="delete">Enter "I WANT TO DELETE THIS PRODUCT" in the box to confirm deletion</label>
            </form>

            <form class="variant-create" 
            action="{{url_for('product_manage.variant', method='create', productId=p['product_id'])}}" method="POST">
                <h1 class="variant-create center">Create Variant</h1> 
                  
                <label for="color-check" class="color-check">New Color?</label>
                <input type="checkbox" name="color-check" class="color-check" onchange="colorBox(this)" autocomplete="off">
                <div class="flex exist-color">
                    <div class="fancy-input">
                        <select class="full-width color-select" name="color-select" for="color-select">
                            {% for c in colorData %}
                            {% set select = 'selected' if c['color_name'] == p['color_name'] else "" %}
                                <option name="{{c['color_name']}}" value="{{c['color_id']}}" {{select}}>
                                    {{c['color_name']}} â€“ {{c['color_hex']}}
                                </option>
                            {% endfor %}
                        </select>

                        <input class="full-width" style="display: none">
                        <label class="label-shown" for="color-select">Color:</label>
                    </div>
                </div>
                <div class="flex custom-color" style="display:none">
                    <div class="fancy-input">
                        <input class="full-width" type="text" name="color-name" class="color-name" placeholder="Sky Blue" disabled="disabled"/>
                        <label class="label-shown" for="color-name">Color Name:</label>
                    </div>
                    <div class="fancy-input">
                        <input class="full-width" type="text" name="color-hex" class="color-hex" placeholder="#00FFFF" disabled="disabled"/>
                        <label class="label-shown" for="color-hex">Color Hexidecimal:</label>
                    </div>
                </div>

                <div class="flex">
                    <div class="fancy-input">
                        <input class="full-width" type="text" name="size" placeholder="" required/>
                        <label class="" for="size">Size:</label>
                    </div>
                </div>

                <div class="flex">
                    <div class="fancy-input">
                        <input class="full-width" type="text" name="price" placeholder="$10.99" required/>
                        <label class="label-shown" for="size">Price:</label>
                    </div>
                </div>

                <div class="flex">
                    <div class="fancy-input">
                        <input class="full-width" type="number" name="inventory" value="1" placeholder="" required/>
                        <label class="label-shown" for="inventory">Current Inventory:</label>
                    </div>
                </div>

                <div class="images">
                    <button class="btn image-btn" type="button" onclick="addURL(this)">Add Another URL</button>
                    <div class="full-width">
                        <div class="fancy-input">
                            <input class="full-width" type="url" name="url" placeholder="" required/>
                            <label class="label-shown" for="url">Image URL:</label>
                        </div>
                    </div>
                </div>

                <input type="submit" class="btn" value="Create Variant">
            </form>
        </div>
        {% endfor %}
    </div>
{% endblock %}